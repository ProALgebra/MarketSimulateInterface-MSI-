# import database
import numpy as np
import datetime
from graphics.graph import *
from data import *

logs = {datetime.datetime(2021, 5, 18, 19, 23, 9, 560115): {'TMOS': 7956, 'FREE': 50004.572}, datetime.datetime(2021, 5, 19, 19, 23, 9, 560115): {'TMOS': 8013, 'FREE': 49651.40000000001}, datetime.datetime(2021, 5, 20, 19, 23, 9, 560115): {'TMOS': 8013, 'FREE': 49651.40000000001}, datetime.datetime(2021, 5, 21, 19, 23, 9, 560115): {'TMOS': 7988, 'FREE': 49807.25000000001}, datetime.datetime(2021, 5, 22, 19, 23, 9, 560115): {'TMOS': 7988, 'FREE': 49807.25000000001}, datetime.datetime(2021, 5, 24, 19, 23, 9, 560115): {'TMOS': 7986, 'FREE': 49819.726}, datetime.datetime(2021, 5, 25, 19, 23, 9, 560115): {'TMOS': 7960, 'FREE': 49982.954}, datetime.datetime(2021, 5, 26, 19, 23, 9, 560115): {'TMOS': 7933, 'FREE': 50153.647999999994}, datetime.datetime(2021, 5, 27, 19, 23, 9, 560115): {'TMOS': 7909, 'FREE': 50306.287999999986}, datetime.datetime(2021, 5, 28, 19, 23, 9, 560115): {'TMOS': 7905, 'FREE': 50331.75199999999}, datetime.datetime(2021, 5, 29, 19, 23, 9, 560115): {'TMOS': 7905, 'FREE': 50331.75199999999}, datetime.datetime(2021, 5, 31, 19, 23, 9, 560115): {'TMOS': 7905, 'FREE': 50331.75199999999}, datetime.datetime(2021, 6, 1, 19, 23, 9, 560115): {'TMOS': 7856, 'FREE': 50647.605999999985}, datetime.datetime(2021, 6, 2, 19, 23, 9, 560115): {'TMOS': 7831, 'FREE': 50809.805999999975}, datetime.datetime(2021, 6, 3, 19, 23, 9, 560115): {'TMOS': 7827, 'FREE': 50835.78199999998}, datetime.datetime(2021, 6, 4, 19, 23, 9, 560115): {'TMOS': 7814, 'FREE': 50920.48999999998}, datetime.datetime(2021, 6, 5, 19, 23, 9, 560115): {'TMOS': 7814, 'FREE': 50920.48999999998}, datetime.datetime(2021, 6, 7, 19, 23, 9, 560115): {'TMOS': 7801, 'FREE': 51005.48399999999}, datetime.datetime(2021, 6, 8, 19, 23, 9, 560115): {'TMOS': 7809, 'FREE': 50953.29199999999}, datetime.datetime(2021, 6, 9, 19, 23, 9, 560115): {'TMOS': 7790, 'FREE': 51077.85599999999}, datetime.datetime(2021, 6, 10, 19, 23, 9, 560115): {'TMOS': 7786, 'FREE': 51104.10399999999}, datetime.datetime(2021, 6, 11, 19, 23, 9, 560115): {'TMOS': 7777, 'FREE': 51163.306}, datetime.datetime(2021, 6, 12, 19, 23, 9, 560115): {'TMOS': 7777, 'FREE': 51163.306}, datetime.datetime(2021, 6, 14, 19, 23, 9, 560115): {'TMOS': 7756, 'FREE': 51302.19999999999}, datetime.datetime(2021, 6, 15, 19, 23, 9, 560115): {'TMOS': 7790, 'FREE': 51079.295999999995}, datetime.datetime(2021, 6, 16, 19, 23, 9, 560115): {'TMOS': 7782, 'FREE': 51131.855999999985}, datetime.datetime(2021, 6, 17, 19, 23, 9, 560115): {'TMOS': 7804, 'FREE': 50988.15199999997}, datetime.datetime(2021, 6, 18, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101598.40999999997}, datetime.datetime(2021, 6, 19, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101598.40999999997}, datetime.datetime(2021, 6, 21, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101598.40999999997}, datetime.datetime(2021, 6, 22, 19, 23, 9, 560115): {'TMOS': 7749, 'FREE': 50802.52199999997}, datetime.datetime(2021, 6, 23, 19, 23, 9, 560115): {'TMOS': 7739, 'FREE': 50868.24199999997}, datetime.datetime(2021, 6, 24, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101412.85799999996}, datetime.datetime(2021, 6, 25, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101412.85799999996}, datetime.datetime(2021, 6, 26, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101412.85799999996}, datetime.datetime(2021, 6, 28, 19, 23, 9, 560115): {'TMOS': 7730, 'FREE': 50710.61799999996}, datetime.datetime(2021, 6, 29, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 100840.91199999995}, datetime.datetime(2021, 6, 30, 19, 23, 9, 560115): {'TMOS': 7688, 'FREE': 50429.565999999955}, datetime.datetime(2021, 7, 1, 19, 23, 9, 560115): {'TMOS': 7657, 'FREE': 50634.53799999996}, datetime.datetime(2021, 7, 2, 19, 23, 9, 560115): {'TMOS': 7628, 'FREE': 50827.73599999995}, datetime.datetime(2021, 7, 3, 19, 23, 9, 560115): {'TMOS': 7628, 'FREE': 50827.73599999995}, datetime.datetime(2021, 7, 5, 19, 23, 9, 560115): {'TMOS': 7619, 'FREE': 50887.83799999996}, datetime.datetime(2021, 7, 6, 19, 23, 9, 560115): {'TMOS': 7618, 'FREE': 50894.51799999996}, datetime.datetime(2021, 7, 7, 19, 23, 9, 560115): {'TMOS': 7596, 'FREE': 51042.31399999997}, datetime.datetime(2021, 7, 8, 19, 23, 9, 560115): {'TMOS': 7633, 'FREE': 50796.11599999997}, datetime.datetime(2021, 7, 9, 19, 23, 9, 560115): {'TMOS': 7628, 'FREE': 50829.425999999985}, datetime.datetime(2021, 7, 10, 19, 23, 9, 560115): {'TMOS': 7628, 'FREE': 50829.425999999985}, datetime.datetime(2021, 7, 12, 19, 23, 9, 560115): {'TMOS': 7609, 'FREE': 50956.64999999998}, datetime.datetime(2021, 7, 13, 19, 23, 9, 560115): {'TMOS': 7615, 'FREE': 50916.53399999997}, datetime.datetime(2021, 7, 14, 19, 23, 9, 560115): {'TMOS': 7628, 'FREE': 50829.92799999996}, datetime.datetime(2021, 7, 15, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 16, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 17, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 19, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 20, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 21, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 22, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 23, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 24, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 26, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 27, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 28, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101198.63599999995}, datetime.datetime(2021, 7, 29, 19, 23, 9, 560115): {'TMOS': 7632, 'FREE': 50605.10599999996}, datetime.datetime(2021, 7, 30, 19, 23, 9, 560115): {'TMOS': 7662, 'FREE': 50407.765999999974}, datetime.datetime(2021, 7, 31, 19, 23, 9, 560115): {'TMOS': 7662, 'FREE': 50407.765999999974}, datetime.datetime(2021, 8, 2, 19, 23, 9, 560115): {'TMOS': 7649, 'FREE': 50493.56599999998}, datetime.datetime(2021, 8, 3, 19, 23, 9, 560115): {'TMOS': 7646, 'FREE': 50513.383999999984}, datetime.datetime(2021, 8, 4, 19, 23, 9, 560115): {'TMOS': 7632, 'FREE': 50606.203999999976}, datetime.datetime(2021, 8, 5, 19, 23, 9, 560115): {'TMOS': 7618, 'FREE': 50699.35999999998}, datetime.datetime(2021, 8, 6, 19, 23, 9, 560115): {'TMOS': 7630, 'FREE': 50619.751999999986}, datetime.datetime(2021, 8, 7, 19, 23, 9, 560115): {'TMOS': 7630, 'FREE': 50619.751999999986}, datetime.datetime(2021, 8, 9, 19, 23, 9, 560115): {'TMOS': 7609, 'FREE': 50759.821999999986}, datetime.datetime(2021, 8, 10, 19, 23, 9, 560115): {'TMOS': 7580, 'FREE': 50954.759999999995}, datetime.datetime(2021, 8, 11, 19, 23, 9, 560115): {'TMOS': 7561, 'FREE': 51083.12399999999}, datetime.datetime(2021, 8, 12, 19, 23, 9, 560115): {'TMOS': 7548, 'FREE': 51171.23799999999}, datetime.datetime(2021, 8, 13, 19, 23, 9, 560115): {'TMOS': 7562, 'FREE': 51076.68199999999}, datetime.datetime(2021, 8, 14, 19, 23, 9, 560115): {'TMOS': 7562, 'FREE': 51076.68199999999}, datetime.datetime(2021, 8, 16, 19, 23, 9, 560115): {'TMOS': 7548, 'FREE': 51171.574}, datetime.datetime(2021, 8, 17, 19, 23, 9, 560115): {'TMOS': 7501, 'FREE': 51494.182}, datetime.datetime(2021, 8, 18, 19, 23, 9, 560115): {'TMOS': 7515, 'FREE': 51398.450000000004}, datetime.datetime(2021, 8, 19, 19, 23, 9, 560115): {'TMOS': 7571, 'FREE': 51021.12200000001}, datetime.datetime(2021, 8, 20, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101740.12200000002}, datetime.datetime(2021, 8, 21, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101740.12200000002}, datetime.datetime(2021, 8, 23, 19, 23, 9, 560115): {'TMOS': 7532, 'FREE': 50875.74800000002}, datetime.datetime(2021, 8, 24, 19, 23, 9, 560115): {'TMOS': 7520, 'FREE': 50957.06000000002}, datetime.datetime(2021, 8, 25, 19, 23, 9, 560115): {'TMOS': 7525, 'FREE': 50923.23000000002}, datetime.datetime(2021, 8, 26, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101484.51000000001}, datetime.datetime(2021, 8, 27, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101484.51000000001}, datetime.datetime(2021, 8, 28, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 101484.51000000001}, datetime.datetime(2021, 8, 30, 19, 23, 9, 560115): {'TMOS': 7431, 'FREE': 50752.47}, datetime.datetime(2021, 8, 31, 19, 23, 9, 560115): {'TMOS': 7434, 'FREE': 50731.998}, datetime.datetime(2021, 9, 1, 19, 23, 9, 560115): {'TMOS': 7393, 'FREE': 51014.897999999994}, datetime.datetime(2021, 9, 2, 19, 23, 9, 560115): {'TMOS': 7366, 'FREE': 51202.54799999999}, datetime.datetime(2021, 9, 3, 19, 23, 9, 560115): {'TMOS': 7362, 'FREE': 51230.37999999999}, datetime.datetime(2021, 9, 4, 19, 23, 9, 560115): {'TMOS': 7362, 'FREE': 51230.37999999999}, datetime.datetime(2021, 9, 6, 19, 23, 9, 560115): {'TMOS': 7328, 'FREE': 51469.12799999998}, datetime.datetime(2021, 9, 7, 19, 23, 9, 560115): {'TMOS': 7345, 'FREE': 51350.29799999998}, datetime.datetime(2021, 9, 8, 19, 23, 9, 560115): {'TMOS': 7329, 'FREE': 51462.61799999998}, datetime.datetime(2021, 9, 9, 19, 23, 9, 560115): {'TMOS': 7360, 'FREE': 51246.79599999998}, datetime.datetime(2021, 9, 10, 19, 23, 9, 560115): {'TMOS': 7348, 'FREE': 51330.60399999998}, datetime.datetime(2021, 9, 11, 19, 23, 9, 560115): {'TMOS': 7348, 'FREE': 51330.60399999998}, datetime.datetime(2021, 9, 13, 19, 23, 9, 560115): {'TMOS': 7314, 'FREE': 51570.30399999999}, datetime.datetime(2021, 9, 14, 19, 23, 9, 560115): {'TMOS': 7295, 'FREE': 51704.93799999999}, datetime.datetime(2021, 9, 15, 19, 23, 9, 560115): {'TMOS': 7281, 'FREE': 51804.533999999985}, datetime.datetime(2021, 9, 16, 19, 23, 9, 560115): {'TMOS': 7319, 'FREE': 51537.013999999974}, datetime.datetime(2021, 9, 17, 19, 23, 9, 560115): {'TMOS': 7333, 'FREE': 51438.81799999998}, datetime.datetime(2021, 9, 18, 19, 23, 9, 560115): {'TMOS': 7333, 'FREE': 51438.81799999998}, datetime.datetime(2021, 9, 20, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102234.91399999998}, datetime.datetime(2021, 9, 21, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102234.91399999998}, datetime.datetime(2021, 9, 22, 19, 23, 9, 560115): {'TMOS': 7269, 'FREE': 51126.33799999998}, datetime.datetime(2021, 9, 23, 19, 23, 9, 560115): {'TMOS': 7253, 'FREE': 51239.36199999997}, datetime.datetime(2021, 9, 24, 19, 23, 9, 560115): {'TMOS': 7259, 'FREE': 51197.049999999974}, datetime.datetime(2021, 9, 25, 19, 23, 9, 560115): {'TMOS': 7259, 'FREE': 51197.049999999974}, datetime.datetime(2021, 9, 27, 19, 23, 9, 560115): {'TMOS': 7220, 'FREE': 51475.04199999997}, datetime.datetime(2021, 9, 28, 19, 23, 9, 560115): {'TMOS': 7233, 'FREE': 51382.71599999997}, datetime.datetime(2021, 9, 29, 19, 23, 9, 560115): {'TMOS': 7245, 'FREE': 51297.75599999997}, datetime.datetime(2021, 9, 30, 19, 23, 9, 560115): {'TMOS': 7212, 'FREE': 51533.507999999965}, datetime.datetime(2021, 10, 1, 19, 23, 9, 560115): {'TMOS': 7215, 'FREE': 51512.09399999997}, datetime.datetime(2021, 10, 2, 19, 23, 9, 560115): {'TMOS': 7215, 'FREE': 51512.09399999997}, datetime.datetime(2021, 10, 4, 19, 23, 9, 560115): {'TMOS': 7195, 'FREE': 51655.65399999997}, datetime.datetime(2021, 10, 5, 19, 23, 9, 560115): {'TMOS': 7110, 'FREE': 52280.573999999964}, datetime.datetime(2021, 10, 6, 19, 23, 9, 560115): {'TMOS': 7137, 'FREE': 52083.58199999996}, datetime.datetime(2021, 10, 7, 19, 23, 9, 560115): {'TMOS': 7102, 'FREE': 52341.46199999996}, datetime.datetime(2021, 10, 8, 19, 23, 9, 560115): {'TMOS': 7079, 'FREE': 52512.075999999965}, datetime.datetime(2021, 10, 9, 19, 23, 9, 560115): {'TMOS': 7079, 'FREE': 52512.075999999965}, datetime.datetime(2021, 10, 11, 19, 23, 9, 560115): {'TMOS': 7044, 'FREE': 52774.29599999996}, datetime.datetime(2021, 10, 12, 19, 23, 9, 560115): {'TMOS': 7060, 'FREE': 52654.96799999996}, datetime.datetime(2021, 10, 13, 19, 23, 9, 560115): {'TMOS': 7080, 'FREE': 52506.64799999995}, datetime.datetime(2021, 10, 14, 19, 23, 9, 560115): {'TMOS': 7062, 'FREE': 52640.81999999995}, datetime.datetime(2021, 10, 15, 19, 23, 9, 560115): {'TMOS': 7062, 'FREE': 52640.819999999956}, datetime.datetime(2021, 10, 16, 19, 23, 9, 560115): {'TMOS': 7062, 'FREE': 52640.819999999956}, datetime.datetime(2021, 10, 18, 19, 23, 9, 560115): {'TMOS': 7068, 'FREE': 52596.17999999996}, datetime.datetime(2021, 10, 19, 19, 23, 9, 560115): {'TMOS': 7047, 'FREE': 52753.34399999995}, datetime.datetime(2021, 10, 20, 19, 23, 9, 560115): {'TMOS': 7038, 'FREE': 52820.879999999954}, datetime.datetime(2021, 10, 21, 19, 23, 9, 560115): {'TMOS': 7092, 'FREE': 52421.819999999956}, datetime.datetime(2021, 10, 22, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104696.67199999996}, datetime.datetime(2021, 10, 23, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104696.67199999996}, datetime.datetime(2021, 10, 25, 19, 23, 9, 560115): {'TMOS': 7025, 'FREE': 52353.823999999964}, datetime.datetime(2021, 10, 26, 19, 23, 9, 560115): {'TMOS': 7028, 'FREE': 52331.48599999996}, datetime.datetime(2021, 10, 27, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 10, 28, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 10, 29, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 10, 30, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 1, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 2, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 3, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 4, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 5, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 6, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 8, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 9, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 10, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 11, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 12, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 13, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 15, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 16, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 17, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 18, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 19, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 20, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 22, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 23, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 24, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 25, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 26, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 27, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 29, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 11, 30, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 1, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 2, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 3, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 4, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 6, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 7, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 8, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 9, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 10, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 11, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 13, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 14, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 15, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 16, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 17, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 18, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 20, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 21, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 104401.55599999995}, datetime.datetime(2021, 12, 22, 19, 23, 9, 560115): {'TMOS': 7876, 'FREE': 52206.055999999946}, datetime.datetime(2021, 12, 23, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 103708.55599999995}, datetime.datetime(2021, 12, 24, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 103708.55599999995}, datetime.datetime(2021, 12, 25, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 103708.55599999995}, datetime.datetime(2021, 12, 27, 19, 23, 9, 560115): {'TMOS': 7824, 'FREE': 51857.71199999995}, datetime.datetime(2021, 12, 28, 19, 23, 9, 560115): {'TMOS': 7809, 'FREE': 51957.49199999995}, datetime.datetime(2021, 12, 29, 19, 23, 9, 560115): {'TMOS': 7815, 'FREE': 51917.63999999995}, datetime.datetime(2021, 12, 30, 19, 23, 9, 560115): {'TMOS': 7805, 'FREE': 51984.23999999995}, datetime.datetime(2021, 12, 31, 19, 23, 9, 560115): {'TMOS': 7805, 'FREE': 51984.23999999995}, datetime.datetime(2022, 1, 1, 19, 23, 9, 560115): {'TMOS': 7805, 'FREE': 51984.23999999995}, datetime.datetime(2022, 1, 3, 19, 23, 9, 560115): {'TMOS': 7720, 'FREE': 52562.91999999993}, datetime.datetime(2022, 1, 4, 19, 23, 9, 560115): {'TMOS': 7714, 'FREE': 52603.827999999936}, datetime.datetime(2022, 1, 5, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 103201.10799999995}, datetime.datetime(2022, 1, 6, 19, 23, 9, 560115): {'TMOS': 7755, 'FREE': 51605.99199999995}, datetime.datetime(2022, 1, 7, 19, 23, 9, 560115): {'TMOS': 7755, 'FREE': 51605.99199999995}, datetime.datetime(2022, 1, 8, 19, 23, 9, 560115): {'TMOS': 7755, 'FREE': 51605.99199999995}, datetime.datetime(2022, 1, 10, 19, 23, 9, 560115): {'TMOS': 7754, 'FREE': 51612.64799999994}, datetime.datetime(2022, 1, 11, 19, 23, 9, 560115): {'TMOS': 7724, 'FREE': 51813.88799999995}, datetime.datetime(2022, 1, 12, 19, 23, 9, 560115): {'TMOS': 7693, 'FREE': 52023.50999999994}, datetime.datetime(2022, 1, 13, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 14, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 15, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 17, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 18, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 19, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 20, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 21, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 22, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 24, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 25, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 26, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 27, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 28, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 29, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 102452.26199999994}, datetime.datetime(2022, 1, 31, 19, 23, 9, 560115): {'TMOS': 8108, 'FREE': 51232.235999999946}, datetime.datetime(2022, 2, 1, 19, 23, 9, 560115): {'TMOS': 8114, 'FREE': 51194.38799999994}, datetime.datetime(2022, 2, 2, 19, 23, 9, 560115): {'TMOS': 8129, 'FREE': 51100.09799999994}, datetime.datetime(2022, 2, 3, 19, 23, 9, 560115): {'TMOS': 8210, 'FREE': 50600.975999999944}, datetime.datetime(2022, 2, 4, 19, 23, 9, 560115): {'TMOS': 8185, 'FREE': 50755.97599999994}, datetime.datetime(2022, 2, 5, 19, 23, 9, 560115): {'TMOS': 8185, 'FREE': 50755.97599999994}, datetime.datetime(2022, 2, 7, 19, 23, 9, 560115): {'TMOS': 8194, 'FREE': 50700.30199999994}, datetime.datetime(2022, 2, 8, 19, 23, 9, 560115): {'TMOS': 8122, 'FREE': 51153.75799999994}, datetime.datetime(2022, 2, 9, 19, 23, 9, 560115): {'TMOS': 8041, 'FREE': 51674.26399999995}, datetime.datetime(2022, 2, 10, 19, 23, 9, 560115): {'TMOS': 8048, 'FREE': 51629.36599999996}, datetime.datetime(2022, 2, 11, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 100989.66399999995}, datetime.datetime(2022, 2, 12, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 100989.66399999995}, datetime.datetime(2022, 2, 14, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 100989.66399999995}, datetime.datetime(2022, 2, 15, 19, 23, 9, 560115): {'TMOS': 7868, 'FREE': 50499.25799999995}, datetime.datetime(2022, 2, 16, 19, 23, 9, 560115): {'TMOS': 7835, 'FREE': 50712.833999999944}, datetime.datetime(2022, 2, 17, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 2, 18, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 2, 19, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 2, 21, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 2, 22, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 2, 23, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 2, 24, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 2, 25, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 2, 26, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 2, 28, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 3, 1, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 3, 2, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 3, 3, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 3, 4, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 3, 5, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 3, 7, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 3, 8, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 3, 9, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 3, 10, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}, datetime.datetime(2022, 3, 11, 19, 23, 9, 560115): {'TMOS': 1, 'FREE': 99534.32199999994}}


class database():
    def __init__(self):
        self.logs = logs

    @staticmethod
    def getTicketsPricesAtDay(ticket, data):
        return mass[data]


class Metrics():
    def __init__(self, logs):
        self.totals = None
        self.DPNL = None
        self.relative_totals = None
        self.balance = None
        # self.all_tickers = database.getAllTickers()
        self.all_tickers = ["TMOS"]
        self.logs = logs
        self.createTotals()
        # print(self.totals)
        self.relativeTotal()
        print(self.relative_totals)
        self.balancee()
        print(self.balance)
        self.createDPNL()
        # print(self.DPNL)
        # self.Sharp()

    def totalAtDay(self, data):
        portfel = self.logs[data].copy()
        free_money = portfel["FREE"]
        portfel.pop("FREE")
        ticker_ndarray = list(portfel.keys())
        ticker_to_absolute_costs = database.getTicketsPricesAtDay(ticker_ndarray, data)
        money_in_tickers = 0
        for ticker in ticker_ndarray:
            money_in_tickers += portfel[ticker] * ticker_to_absolute_costs[ticker]
        total = free_money + money_in_tickers
        return total

    def createTotals(self):
        self.totals = {}
        days = self.logs.keys()
        for day in days:
            self.totals[day] = self.totalAtDay(day)

    def createDPNL(self):
        self.DPNL = {}
        days = sorted(list(self.logs.keys()))[1:]
        for i in range(1, len(self.logs)-1):
            self.DPNL[days[i]] = (self.totalAtDay(days[i])- self.totalAtDay(days[i-1])) / self.totalAtDay(days[i-1])

    def relativeTotal(self):
        self.relative_totals = {}
        days = sorted(list(self.logs.keys()))
        total_at_first_day = self.totals[days[0]]
        for day in days:
            self.relative_totals[day] = self.totals[day] / total_at_first_day

    def balancee(self):
        self.balance = {}
        portfel = self.logs
        ticker_ndarray = list(portfel.values())

        for day in self.logs:
            day_balance = {}
            day_tickers = self.all_tickers
            ticker_to_absolute_costs = database.getTicketsPricesAtDay(ticker_ndarray, day)
            for ticker in day_tickers:
                money_in_that_ticker = portfel[day][ticker] * ticker_to_absolute_costs[ticker]
                day_balance[ticker] = money_in_that_ticker/self.totalAtDay(day)

            free_money = portfel[day]["FREE"]
            day_balance["FREE"] = free_money/self.totalAtDay(day)

            self.balance[day] = day_balance


    def Sharp(self):
        pass


def main():
    metrics = Metrics(logs = logs)

    # graph_interface_1 = GraphInterface(metrics.totals, label='Total')
    # graph_interface_2 = GraphInterface(metrics.DPNL, label='DPNL')
    graph_interface_3 = GraphInterface(metrics.balance, label='Balances')

    # graph_interface_1.plot_Total()
    # graph_interface_2.plot_DPNL()
    graph_interface_3.plot_balance()



if __name__ == "__main__":
    main()


